-- Simplified database schema for SASTT

CREATE TABLE Aircraft (
    Id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    TailNumber VARCHAR2(20) NOT NULL,
    Model VARCHAR2(100) NOT NULL
);

CREATE TABLE Defects (
    Id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    AircraftId NUMBER REFERENCES Aircraft(Id),
    Description VARCHAR2(400) NOT NULL,
    Priority VARCHAR2(20) NOT NULL,
    IsResolved NUMBER(1) DEFAULT 0
);

CREATE TABLE WorkOrders (
    Id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    AircraftId NUMBER REFERENCES Aircraft(Id),
    Title VARCHAR2(200) NOT NULL,
    Priority VARCHAR2(20) NOT NULL,
    Status VARCHAR2(20) NOT NULL,
    PlannedStart TIMESTAMP,
    PlannedEnd TIMESTAMP,
    ActualStart TIMESTAMP,
    ActualEnd TIMESTAMP
);

CREATE TABLE Tasks (
    Id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    WorkOrderId NUMBER REFERENCES WorkOrders(Id),
    Description VARCHAR2(400) NOT NULL,
    Status VARCHAR2(20) NOT NULL
);

CREATE TABLE Pilots (
    Id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    Name VARCHAR2(100) NOT NULL
);

CREATE TABLE TrainingSessions (
    Id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    PilotId NUMBER REFERENCES Pilots(Id),
    ScheduledFor TIMESTAMP NOT NULL,
    Completed NUMBER(1) DEFAULT 0
);
